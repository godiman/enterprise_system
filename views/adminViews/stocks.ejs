<!DOCTYPE html>
<html lang="en">
<head>
   
    <title>Admin | Enterprise System</title>

    <!-- Online CSS Links -->
    <%- include('../snippets/header.ejs') %>
    <!-- Template Main CSS File -->
    <link href="/css/style.css" rel="stylesheet">
</head>
<body>

    <!-- ======= Header ======= -->
    <%- include('../snippets/nav.ejs') %>
    <!-- End Header -->

    <!-- ======= Sidebar ======= -->
    <%- include('../snippets/sidebar.ejs') %>
    <!-- End Sidebar-->

    <!-- End #main -->
    <main id="main" class="main">

        <div class="pagetitle">
            <h1>Stocks</h1>
            <nav>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/admin/home">Home</a></li>
                    <li class="breadcrumb-item active">Dashboard</li>

                    <div class="pt-2 ms-auto">
                        <button data-bs-toggle="modal" data-bs-target="#exampleModal" title="Register new department" class="btn btn-success btn-lg text-white"><i class="bi bi-plus-lg"></i></button>
                    </div>
                </ol>
            </nav>
        </div><!-- End Page Title -->


        <section class="section">
            <div class="row">
              <div class="col-lg-12">
  
  
                <div class="table-responsive">
                    <table class="table table-striped table-sm table datatable">
                    
                        <!-- Table with stripped rows -->
                    
                        <thead>
                          <tr>
                            <th scope="col">Brand</th>
                            <th scope="col">Category</th>
                            <th scope="col">Pakage Type</th>
                            <th scope="col">whole Price</th>
                            <th scope="col">Unity Price</th>
                            <th scope="col">Wholesale Qty</th>
                            <th scope="col">Unity Qty</th>
                            <th scope="col">total qty packtype</th>
                            <th scope="col">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <% if (context.stocks) { %>  
                            <% context.stocks.forEach(stock => { %>
                          <tr>                            <td><%= stock.brand %></td>
                            <td><%= stock.category %></td>
                            <td><%= stock.pakagingType %></td>
                            <td><%= stock.wholePrice %></td>
                            <td><%= stock.unitPrice %></td>
                            <td><%= stock.wholeQty %></td>
                            <td><%= stock.unitQty %></td>
                            <td><%= stock.totalQtyInPackType %></td>
                            <td>
                              <a href="/admin/edit-stock/?stock_id=<%= stock._id %>" type="button" class="btn d-flex align-items-center btn-outline-info btn-sm">Edit</a>
                                <button type="button" class="btn d-flex align-items-center btn-outline-danger btn-sm"
                                onclick=" return  deleteStock('<%= stock._id %>')">Delete</button>
                            </td>
                          </tr> 
                          <% }) %>                      
                          <% } %>
                        </tbody>
                      
                      <!-- End Table with stripped rows -->
  
  
                    </table>    
                </div>
      
              </div>
            </div>
          </section>


        
    </main>
    <!-- End #main -->

     <!-- Scrollable modal -->
      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Register new stock</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form action="" id="stockForm" class="row g-3">
                    <div class="col-md-4">
                      <label for="inputName" class="form-label">Brand</label>
                      <input type="text" name="brand" class="form-control">
                    </div>
                    <div class="col-md-4">
                      <label for="inputPackage" class="form-label">Category</label>
                      <input type="text" name="category" class="form-control">
                    </div>
                    <div class="col-md-4">
                      <label for="inputPackage" class="form-label">Package type</label>
                      <select name="pakagingType" class="form-select">
                        <option selected value="">Select Package</option>
                        <% if (context.packages) { %>
                        <% context.packages.forEach(package=> { %>
                        <option value="<%= package.pakagingType %>"><%= package.pakagingType %></option>
                        <% }) %>
                        <% } %>                                  
                    </select>
                  
                    </div>
                    <div class="col-md-4">
                     <label for="inputWholesale" class="form-label">Wholesale price</label>
                     <input type="text" name="wholePrice" class="form-control">
                    </div>
                    <div class="col-md-4">
                      <label for="inputUnityprice" class="form-label">unity price</label>
                      <input type="number" name="unitPrice" class="form-control">
                  </div>
                  <div class="col-md-4">
                    <label for="inputWholesaleQty" class="form-label">Wholesale Qty</label>
                    <input type="number" name="wholeQty" class="form-control">
                  </div>
                 <div class="col-md-4">
                  <label for="inputUnityQty" class="form-label">unity Qty</label>
                  <input type="number" name="unitQty" class="form-control">
                 </div>
               <div class="col-md-7">
                <label for="inputUnityQty" class="form-label">total qty in a packtype</label>
                <input type="number" name="totalQtyInPackType" class="form-control">
               </div>
                    
                    <div class="col-6">
                        <button type="submit" class="btn btn-success">Register</button>
                    </div>

                    <div class="nameErr error"></div>

                </form>
            </div>
            
            </div>
        </div>
      </div>

    <!-- ======= Footer ======= -->
    <%- include('../snippets/adminFooter.ejs') %>
    <!-- End Footer -->

    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
    class="bi bi-arrow-up-short"></i></a>

    <!-- Vendor JS Files -->
      <script src="/formHandler/stock.js"></script>
      <script src="/formHandler/deleteStock.js"></script>
    <%- include('../snippets/toast.ejs') %>
    <%- include('../snippets/scripts.ejs') %>
    
</body>
</html>